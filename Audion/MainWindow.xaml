<Window x:Class="Audion.MainWindow"
        
        Icon="pack://application:,,,/Assets/Audion.ico"
        Background="#1A252E"
        ResizeMode="CanMinimize"
        BorderBrush="Transparent"
        
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Audion.ViewModel"
        mc:Ignorable="d"
        Title="Audion" Height="700" Width="1200">

    <Window.DataContext>
        <local:MainViewModel />
    </Window.DataContext>

    <Window.Resources>

        <Style TargetType="ListBox" x:Key="HoverListBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="15"/>
        </Style>

        <Style TargetType="ListBoxItem" x:Key="HoverListBoxItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="Padding" Value="5,2"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                SnapsToDevicePixels="true"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Left"
                                              VerticalAlignment="Center"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}"
                                              ContentStringFormat="{TemplateBinding ContentStringFormat}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#7EBB9D"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#1A222A"/>
                                <Setter Property="Foreground" Value="#A3F7BF"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="Gray"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Button" x:Key="RegularButton">
            <Setter Property="Background" Value="#11191E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <TextBlock Text="{TemplateBinding Content}"
                                       FontFamily="{TemplateBinding FontFamily}"
                                       FontSize="{TemplateBinding FontSize}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#141D26"/>
                    <Setter Property="Foreground" Value="#A3F7BF"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="Button" x:Key="ToggleLoop">
            <Setter Property="Background" Value="#11191E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">    
                            <TextBlock Text="{TemplateBinding Content}"
                                       FontFamily="{TemplateBinding FontFamily}"
                                       FontSize="{TemplateBinding FontSize}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsLooping}" Value="True">
                    <Setter Property="Foreground" Value="#7EBB9D"/>
                </DataTrigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#141D26"/>
                    <Setter Property="Foreground" Value="#A3F7BF"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>


    <Grid Margin="10">
        
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="20" />
            <ColumnDefinition Width="8*" />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Border Grid.Column="0"
                CornerRadius="10"
                Background="#11191E"
                ClipToBounds="True"
                Padding="5">
            <ListBox ItemsSource="{Binding Playlists}"
                     SelectedItem="{Binding SelectedPlaylist, Mode=TwoWay}"
                     ItemContainerStyle="{StaticResource HoverListBoxItem}"
                     FontSize="20"
                     FontFamily="Arial Rounded MT Bold"
                     Background="Transparent"
                     BorderBrush="Transparent">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" 
                                   FontFamily="Arial Rounded MT Bold"
                                   FontSize="20"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

        </Border>

        <Border Grid.Column="2"
                CornerRadius="10"
                Background="#11191E"
                ClipToBounds="True"
                Padding="5">
            <ListBox ItemsSource="{Binding SelectedPlaylist.Tracks}"
                     SelectedItem="{Binding SelectedPlaylist.SelectedTrack, Mode=TwoWay}"
                     ItemContainerStyle="{StaticResource HoverListBoxItem}"
                     FontSize="15"
                     FontFamily="Segoe UI"
                     Background="Transparent"
                     BorderBrush="Transparent">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Title}" 
                                   FontFamily="Segoe UI"
                                   FontSize="15"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>

        <StackPanel Grid.Column="0" 
                    Grid.Row="1" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center" 
                    Margin="0, 10, 10, 0">
            
            <Button FontFamily="Segoe MDL2 Assets" 
                        Style="{StaticResource RegularButton}"
                        Content="&#xE109;" 
                        Click="AddPlaylistButton_Click"
                        Padding="10, 5" 
                        Margin="0, 0, 5, 0"/>
            
            <Button FontFamily="Segoe MDL2 Assets" 
                        Style="{StaticResource RegularButton}"    
                        Content="&#xE74D;" 
                        Click="DeletePlaylistButton_Click"
                        Padding="10, 5" 
                        Margin="0, 0, 5, 0"/>
            
            <Button FontFamily="Segoe MDL2 Assets" 
                        Style="{StaticResource RegularButton}"    
                        Content="&#xE72C;" 
                        Click="RefreshButton_Click"
                        Padding="10, 5" 
                        Margin="0, 0, 5, 0"/>
        </StackPanel>

        <StackPanel Grid.Column="2" 
                    Grid.Row="1" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center" 
                    Margin="0, 10, 10, 0">

            <TextBlock Foreground="White"
                       FontFamily="Segoe UI"
                       VerticalAlignment="Center"
                       Margin="0, 0, 10, 0">
            <Run Text="{Binding PositionFormatted, Mode=OneWay}" />
            <Run Text=" / " />
            <Run Text="{Binding DurationFormatted, Mode=OneWay}" />
            </TextBlock>

            <Slider x:Name="AudioBar" 
                    Minimum="0" 
                    Maximum="{Binding Duration}" 
                    Value="{Binding Position, Mode=TwoWay}" 
                    PreviewMouseLeftButtonDown="AudioBar_MouseLeftButtonDown"
                    PreviewMouseLeftButtonUp="AudioBar_MouseLeftButtonUp"
                    Width="450"
                    Height="20"
                    Margin="10"/>


            <Button FontFamily="Segoe MDL2 Assets" 
                        Style="{StaticResource RegularButton}"
                        Content="&#xE892;" 
                        Click="BTraverse"
                        Padding="10, 5" 
                        Margin="0, 0, 5, 0"/>
            
            <Button FontFamily="Segoe MDL2 Assets" 
                        Style="{StaticResource RegularButton}"
                        Content="{Binding PlayPauseIcon}" 
                        Click="PlayPauseButton_Click"
                        Padding="10, 5" 
                        Margin="0, 0, 5, 0"/>
            
            <Button FontFamily="Segoe MDL2 Assets"
                        Style="{StaticResource RegularButton}"
                        Content="&#xE893;" 
                        Click="FTraverse"
                        Padding="10, 5" 
                        Margin="0, 0, 5, 0"/>

            <Button x:Name="LoopButton"
                        Style="{StaticResource ToggleLoop}"
                        FontFamily="Segoe MDL2 Assets" 
                        Content="&#xE8EE;" 
                        Click="Looping"
                        Padding="10, 5" 
                        Margin="0, 0, 5, 0"/>

            <Slider x:Name="VolumeSlider"
                        Minimum="0"
                        Maximum="1"
                        Value="{Binding Volume, Mode=TwoWay}"
                        SmallChange="0.01"
                        LargeChange="0.1"
                        TickFrequency="0.01"
                        IsSnapToTickEnabled="True"
                        Width="100"
                        VerticalAlignment="Center"
                        Margin="5,0,0,0"/>

            <TextBlock Text="{Binding Volume, StringFormat='{}{0:P0}'}"
                       Foreground="White"
                       FontFamily="Segoe UI"
                       VerticalAlignment="Center"
                       Margin="10, 0, 10, 0">
            </TextBlock>
        </StackPanel>

    </Grid>

</Window>
